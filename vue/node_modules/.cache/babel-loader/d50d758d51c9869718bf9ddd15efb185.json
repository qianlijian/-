{"remainingRequest":"C:\\Users\\xiaorong\\Desktop\\Vue-Springboot-Library-main\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\xiaorong\\Desktop\\Vue-Springboot-Library-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\xiaorong\\Desktop\\Vue-Springboot-Library-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\xiaorong\\Desktop\\Vue-Springboot-Library-main\\vue\\src\\views\\BookWithUser.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\xiaorong\\Desktop\\Vue-Springboot-Library-main\\vue\\src\\views\\BookWithUser.vue","mtime":1650279449000},{"path":"C:\\Users\\xiaorong\\Desktop\\Vue-Springboot-Library-main\\vue\\babel.config.js","mtime":1650279449000},{"path":"C:\\Users\\xiaorong\\Desktop\\Vue-Springboot-Library-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1700710577110},{"path":"C:\\Users\\xiaorong\\Desktop\\Vue-Springboot-Library-main\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1700710586031},{"path":"C:\\Users\\xiaorong\\Desktop\\Vue-Springboot-Library-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1700710577110},{"path":"C:\\Users\\xiaorong\\Desktop\\Vue-Springboot-Library-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1700710585797}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwovLyBAIGlzIGFuIGFsaWFzIHRvIC9zcmMKaW1wb3J0IHJlcXVlc3QgZnJvbSAiLi4vdXRpbHMvcmVxdWVzdCI7CmltcG9ydCB7IEVsTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtcGx1cyI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgdXNlclN0ciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKSB8fCAie30iOwogICAgdGhpcy51c2VyID0gSlNPTi5wYXJzZSh1c2VyU3RyKTsKICAgIHRoaXMubG9hZCgpOwogIH0sCiAgbmFtZTogJ2Jvb2t3aXRodXNlcicsCiAgbWV0aG9kczogewogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UodmFsKSB7CiAgICAgIHRoaXMuZm9ybXMgPSB2YWw7CiAgICB9LAogICAgZGVsZXRlQmF0Y2g6IGZ1bmN0aW9uIGRlbGV0ZUJhdGNoKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmZvcm1zLmxlbmd0aCkgewogICAgICAgIEVsTWVzc2FnZS53YXJuaW5nKCLor7fpgInmi6nmlbDmja7vvIEiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gIOS4gOS4quWwj+S8mOWMlu+8jOebtOaOpeWPkemAgei/meS4quaVsOe7hO+8jOiAjOS4jeaYr+S4gOS4quS4gOS4queahOaPkOS6pOWIoOmZpAoKCiAgICAgIHJlcXVlc3QucG9zdCgiYm9va3dpdGh1c2VyL2RlbGV0ZVJlY29yZHMiLCB0aGlzLmZvcm1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgewogICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoIuaJuemHj+WIoOmZpOaIkOWKnyIpOwoKICAgICAgICAgIF90aGlzLmxvYWQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbG9hZDogZnVuY3Rpb24gbG9hZCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAodGhpcy51c2VyLnJvbGUgPT0gMSkgewogICAgICAgIHJlcXVlc3QuZ2V0KCIvYm9va3dpdGh1c2VyIiwgewogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIHBhZ2VOdW06IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICAgICAgICBzZWFyY2gxOiB0aGlzLnNlYXJjaDEsCiAgICAgICAgICAgIHNlYXJjaDI6IHRoaXMuc2VhcmNoMiwKICAgICAgICAgICAgc2VhcmNoMzogdGhpcy5zZWFyY2gzCiAgICAgICAgICB9CiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgX3RoaXMyLnRhYmxlRGF0YSA9IHJlcy5kYXRhLnJlY29yZHM7CiAgICAgICAgICBfdGhpczIudG90YWwgPSByZXMuZGF0YS50b3RhbDsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXF1ZXN0LmdldCgiL2Jvb2t3aXRodXNlciIsIHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBwYWdlTnVtOiB0aGlzLmN1cnJlbnRQYWdlLAogICAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwKICAgICAgICAgICAgc2VhcmNoMTogdGhpcy5zZWFyY2gxLAogICAgICAgICAgICBzZWFyY2gyOiB0aGlzLnNlYXJjaDIsCiAgICAgICAgICAgIHNlYXJjaDM6IHRoaXMudXNlci5pZAogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIF90aGlzMi50YWJsZURhdGEgPSByZXMuZGF0YS5yZWNvcmRzOwogICAgICAgICAgX3RoaXMyLnRvdGFsID0gcmVzLmRhdGEudG90YWw7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7CiAgICAgIHRoaXMuc2VhcmNoMSA9ICIiOwogICAgICB0aGlzLnNlYXJjaDIgPSAiIjsKICAgICAgdGhpcy5zZWFyY2gzID0gIiI7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKICAgIGhhbmRsZURlbGV0ZTogZnVuY3Rpb24gaGFuZGxlRGVsZXRlKHJvdykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBmb3JtMyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocm93KSk7CiAgICAgIHJlcXVlc3QucG9zdCgiYm9va3dpdGh1c2VyL2RlbGV0ZVJlY29yZCIsIGZvcm0zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBpZiAocmVzLmNvZGUgPT0gMCkgewogICAgICAgICAgRWxNZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICAgIH0gZWxzZSBFbE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CgogICAgICAgIF90aGlzMy5sb2FkKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZXJlUHJvbG9uZzogZnVuY3Rpb24gaGFuZGxlcmVQcm9sb25nKHJvdykgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciBub3dEYXRlID0gbmV3IERhdGUocm93LmRlYWR0aW1lKTsKICAgICAgbm93RGF0ZS5zZXREYXRlKG5vd0RhdGUuZ2V0RGF0ZSgpICsgMzApOwogICAgICByb3cuZGVhZHRpbWUgPSBtb21lbnQobm93RGF0ZSkuZm9ybWF0KCJ5eXl5LU1NLUREIEhIOm1tOnNzIik7CiAgICAgIHJvdy5wcm9sb25nID0gcm93LnByb2xvbmcgLSAxOwogICAgICByZXF1ZXN0LnBvc3QoIi9ib29rd2l0aHVzZXIiLCByb3cpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgIGlmIChyZXMuY29kZSA9PSAwKSB7CiAgICAgICAgICBFbE1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAn57ut5YCf5oiQ5YqfJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgRWxNZXNzYWdlLmVycm9yKHJlcy5tc2cpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXM0LmxvYWQoKTsKCiAgICAgICAgX3RoaXM0LmRpYWxvZ1Zpc2libGUyID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmU6IGZ1bmN0aW9uIHNhdmUoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgLy9FUzbor63ms5UKICAgICAgLy/lnLDlnYAs5L2G5piv77yfSVDkuI7nq6/lj6PvvJ8r6K+35rGC5Y+C5pWwCiAgICAgIC8vIHRoaXMuZm9ybT/ov5nmmK/oh6rliqjkv53lrZjlnKhmb3Jt5Lit55qE77yM6Jm954S25pi+56S65pe25rKh5pyJ5L2/55So77yM5L2G5piv6L+Z5Liq5a+56LGh5Lit5piv5pyJ5a6D55qECiAgICAgIHJlcXVlc3QucG9zdCgiL2Jvb2t3aXRodXNlciIsIHRoaXMuZm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgaWYgKHJlcy5jb2RlID09IDApIHsKICAgICAgICAgIEVsTWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnkv6Hmga/miJDlip8nLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBFbE1lc3NhZ2UuZXJyb3IocmVzLm1zZyk7CiAgICAgICAgfQoKICAgICAgICBfdGhpczUubG9hZCgpOwoKICAgICAgICBfdGhpczUuZGlhbG9nVmlzaWJsZTIgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRWRpdDogZnVuY3Rpb24gaGFuZGxlRWRpdChyb3cpIHsKICAgICAgdGhpcy5mb3JtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyb3cpKTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlMiA9IHRydWU7CiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2l6ZUNoYW5nZShwYWdlU2l6ZSkgewogICAgICB0aGlzLnBhZ2VTaXplID0gcGFnZVNpemU7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnRDaGFuZ2UocGFnZU51bSkgewogICAgICB0aGlzLnBhZ2VOdW0gPSBwYWdlTnVtOwogICAgICB0aGlzLmxvYWQoKTsKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7fSwKICAgICAgZm9ybTI6IHt9LAogICAgICBmb3JtMzoge30sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBkaWFsb2dWaXNpYmxlMjogZmFsc2UsCiAgICAgIHNlYXJjaDE6ICcnLAogICAgICBzZWFyY2gyOiAnJywKICAgICAgc2VhcmNoMzogJycsCiAgICAgIHRvdGFsOiAxMCwKICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgdXNlcjoge30sCiAgICAgIGZvcm1zOiBbXQogICAgfTsKICB9Cn07"},{"version":3,"sources":["C:\\Users\\xiaorong\\Desktop\\Vue-Springboot-Library-main\\vue\\src\\views\\BookWithUser.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"home\" style =\"padding: 10px\">\n    <!-- 搜索-->\n    <div style=\"margin: 10px 0;\">\n\n      <el-form inline=\"true\" size=\"small\" >\n        <el-form-item label=\"图书编号\" >\n          <el-input v-model=\"search1\" placeholder=\"请输入图书编号\"  clearable>\n            <template #prefix><el-icon class=\"el-input__icon\"><search/></el-icon></template>\n          </el-input>\n        </el-form-item >\n        <el-form-item label=\"图书名称\" >\n          <el-input v-model=\"search2\" placeholder=\"请输入图书名称\"  clearable>\n            <template #prefix><el-icon class=\"el-input__icon\"><search /></el-icon></template>\n          </el-input>\n        </el-form-item >\n        <el-form-item label=\"借阅者\" v-if=\"user.role == 1\">\n          <el-input v-model=\"search3\" placeholder=\"请输入借阅者昵称\"  clearable>\n            <template #prefix><el-icon class=\"el-input__icon\"><search /></el-icon></template>\n          </el-input>\n        </el-form-item >\n        <el-form-item>\n          <el-button type=\"primary\" style=\"margin-left: 1%\" @click=\"load\" size=\"mini\">查询</el-button>\n        </el-form-item>\n        <el-form-item>\n          <el-button size=\"mini\"  type=\"danger\" @click=\"clear\">重置</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <!-- 按钮-->\n    <div style=\"margin: 10px 0;\" >\n      <el-popconfirm title=\"确认删除?\" @confirm=\"deleteBatch\" v-if=\"user.role == 1\">\n        <template #reference>\n          <el-button type=\"danger\" size=\"mini\" >批量删除</el-button>\n        </template>\n      </el-popconfirm>\n    </div>\n    <!-- 数据字段-->\n    <el-table :data=\"tableData\" stripe border=\"true\" @selection-change=\"handleSelectionChange\">\n      <el-table-column v-if=\"user.role ==1\"\n          type=\"selection\"\n          width=\"55\">\n      </el-table-column>\n      <el-table-column prop=\"isbn\" label=\"图书编号\" sortable />\n      <el-table-column prop=\"bookName\" label=\"图书名称\" />\n      <el-table-column prop=\"nickName\" label=\"借阅者\" />\n      <el-table-column prop=\"lendtime\" label=\"借阅时间\" />\n      <el-table-column prop=\"deadtime\" label=\"最迟归还日期\" />\n      <el-table-column prop=\"prolong\" label=\"可续借次数\" />\n      <el-table-column fixed=\"right\" label=\"操作\" >\n        <template v-slot=\"scope\">\n          <el-button  size=\"mini\" @click =\"handleEdit(scope.row)\" v-if=\"user.role == 1\">修改</el-button>\n          <el-popconfirm title=\"确认删除?\" @confirm=\"handleDelete(scope.row) \" v-if=\"user.role == 1\">\n            <template #reference>\n              <el-button type=\"danger\" size=\"mini\" >删除</el-button>\n            </template>\n          </el-popconfirm>\n          <el-popconfirm title=\"确认续借(续借一次延长30天)?\" @confirm=\"handlereProlong(scope.row)\" v-if=\"user.role == 2\" :disabled=\"scope.row.prolong == 0\">\n            <template #reference>\n              <el-button type=\"danger\" size=\"mini\" :disabled=\"scope.row.prolong == 0\" >续借</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!--    分页-->\n    <div style=\"margin: 10px 0\">\n      <el-pagination\n          v-model:currentPage=\"currentPage\"\n          :page-sizes=\"[5, 10, 20]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n      >\n      </el-pagination>\n\n      <el-dialog v-model=\"dialogVisible2\" title=\"修改借阅信息\" width=\"30%\">\n        <el-form :model=\"form\" label-width=\"120px\">\n\n          <el-form-item label=\"图书编号\">\n            <el-input style=\"width: 80%\" v-model=\"form.isbn\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"图书名称\">\n            <el-input style=\"width: 80%\" v-model=\"form.bookName\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"借阅者\">\n            <el-input style=\"width: 80%\" v-model=\"form.nickName\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"续借次数\">\n            <el-input style=\"width: 80%\" v-model=\"form.prolong\"></el-input>\n          </el-form-item>\n        </el-form>\n        <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible2 = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"save\">确 定</el-button>\n      </span>\n        </template>\n      </el-dialog>\n\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport request from \"../utils/request\";\nimport {ElMessage} from \"element-plus\";\nimport moment from \"moment\";\nexport default {\n  created(){\n    let userStr = sessionStorage.getItem(\"user\") ||\"{}\"\n    this.user = JSON.parse(userStr)\n    this.load()\n  },\n  name: 'bookwithuser',\n  methods: {\n\n    handleSelectionChange(val){\n      this.forms = val\n    },\n    deleteBatch(){\n      if (!this.forms.length) {\n        ElMessage.warning(\"请选择数据！\")\n        return\n      }\n    //  一个小优化，直接发送这个数组，而不是一个一个的提交删除\n      request.post(\"bookwithuser/deleteRecords\",this.forms).then(res =>{\n        if(res.code === '0'){\n          ElMessage.success(\"批量删除成功\")\n          this.load()\n        }\n        else {\n          ElMessage.error(res.msg)\n        }\n      })\n    },\n    load(){\n      if(this.user.role == 1){\n        request.get(\"/bookwithuser\",{\n          params:{\n            pageNum: this.currentPage,\n            pageSize: this.pageSize,\n            search1: this.search1,\n            search2: this.search2,\n            search3: this.search3,\n          }\n        }).then(res =>{\n          console.log(res)\n          this.tableData = res.data.records\n          this.total = res.data.total\n        })\n      }\n      else {\n        request.get(\"/bookwithuser\",{\n          params:{\n            pageNum: this.currentPage,\n            pageSize: this.pageSize,\n            search1: this.search1,\n            search2: this.search2,\n            search3: this.user.id,\n          }\n        }).then(res =>{\n          console.log(res)\n          this.tableData = res.data.records\n          this.total = res.data.total\n        })\n      }\n    },\n    clear(){\n      this.search1 = \"\"\n      this.search2 = \"\"\n      this.search3 = \"\"\n      this.load()\n    },\n    handleDelete(row){\n      const form3 = JSON.parse(JSON.stringify(row))\n      request.post(\"bookwithuser/deleteRecord\",form3).then(res =>{\n        console.log(res)\n        if(res.code == 0 ){\n          ElMessage.success(\"删除成功\")\n        }\n        else\n          ElMessage.error(res.msg)\n        this.load()\n      })\n    },\n    handlereProlong(row){\n      var nowDate = new Date(row.deadtime);\n      nowDate.setDate(nowDate.getDate()+30);\n      row.deadtime = moment(nowDate).format(\"yyyy-MM-DD HH:mm:ss\");\n      row.prolong = row.prolong -1;\n      request.post(\"/bookwithuser\",row).then(res =>{\n        console.log(res)\n        if(res.code == 0){\n          ElMessage({\n            message: '续借成功',\n            type: 'success',\n          })\n        }\n        else {\n          ElMessage.error(res.msg)\n        }\n        this.load()\n        this.dialogVisible2 = false\n      })\n    },\n    save(){\n      //ES6语法\n      //地址,但是？IP与端口？+请求参数\n      // this.form?这是自动保存在form中的，虽然显示时没有使用，但是这个对象中是有它的\n        request.post(\"/bookwithuser\",this.form).then(res =>{\n          console.log(res)\n          if(res.code == 0){\n            ElMessage({\n              message: '修改信息成功',\n              type: 'success',\n            })\n          }\n          else {\n            ElMessage.error(res.msg)\n          }\n          this.load()\n          this.dialogVisible2 = false\n        })\n    },\n\n    handleEdit(row){\n      this.form = JSON.parse(JSON.stringify(row))\n      this.dialogVisible2 = true\n    },\n    handleSizeChange(pageSize){\n      this.pageSize = pageSize\n      this.load()\n    },\n    handleCurrentChange(pageNum){\n      this.pageNum = pageNum\n      this.load()\n    },\n\n  },\n  data() {\n    return {\n      form: {},\n      form2:{},\n      form3:{},\n      dialogVisible: false,\n      dialogVisible2: false,\n      search1:'',\n      search2:'',\n      search3:'',\n      total:10,\n      currentPage:1,\n      pageSize: 10,\n      tableData: [],\n      user:{},\n      forms:[],\n    }\n  },\n}\n</script>\n"],"sourceRoot":""}]}